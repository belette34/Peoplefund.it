<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head>    <title>Admin area - Assets</title>	<link rel="stylesheet" type="text/css" href="<?php echo site_url('css/admin/main.css'); ?>">	<link rel="stylesheet" type="text/css" href="<?php echo site_url('css/jquery/jquery.lightbox.css'); ?>">	<link rel="stylesheet" type="text/css" href="<?php echo site_url('css/jquery/jquery.alerts.css'); ?>">	<script type="text/javascript" src="<?php echo site_url('js/jquery/jquery-1.5.1.min.js'); ?>"></script>	<script type="text/javascript" src="<?php echo site_url('js/jquery/jquery.dom.js'); ?>"></script>	<script type="text/javascript" src="<?php echo site_url('js/jquery/interface.js'); ?>"></script>	<script type="text/javascript" src="<?php echo site_url('js/jquery/jquery.alerts.js'); ?>"></script>	<script type="text/javascript" src="<?php echo site_url('js/jquery/jquery.corners.js'); ?>"></script>	<script type="text/javascript" src="<?php echo site_url('js/jquery/jquery.quicksearch.js'); ?>"></script>	<script type="text/javascript" src="<?php echo site_url('js/jquery/jquery.dimensions.pack.js'); ?>"></script>	<script type="text/javascript" src="<?php echo site_url('js/jquery/jquery.lightbox.js'); ?>"></script>	<script type="text/javascript" src="<?php echo site_url('js/jquery/jquery.jform.js'); ?>"></script>	<!--<script type="text/javascript" src="<?php echo site_url('js/admin/fm.js'); ?>"></script>-->	<script type="text/javascript" src="<?php echo site_url('js/common/functions.js'); ?>"></script>	<script type="text/javascript">		var cmsSection = 'administration';		var section_id = '<?php echo $section_id; ?>';		var input_id = '<?php echo $input_id; ?>';	</script></head><body style="background: #fff">    <div id="loading">Loading...</div>    <div id="wrapper" style="background-color: #fff; margin: 3px; padding: 3px;">		<div id="location" class="mainForm hidden"><fieldset>			<div id="mk">				<a class="new-section" href="#">New folder</a>&nbsp;				<a class="new-page" href="#">New file(s)</a>&nbsp;			</div>			<div id="loc-ct" class="h1">Location: <span></span></div>		</div></fieldset>			<div class="add mainForm popup-screen hidden" style="border: 0; background: 0;"><fieldset style="border: 5px solid #5a758e;">				<form id="new" enctype="multipart/form-data" class="jform" action="process.php" method="post">					<img src="/img/buttonClose.png" alt="Close" title="Close" border="0" class="xcancel" onclick="$('.add').fadeOut();" />					<br />					<dl>						<dd>							<input type="hidden" name="action" value="upload">							<input type="hidden" id="cwd" name="cwd" value="<?php echo $section_id; ?>">							<label for="file_add" class="long">File</label>							<input type="file" class="long" id="file_add" name="file" class="long" value="" />						</dd>						<dd>							<label for="title_add" class="long">Title</label>							<input type="text" class="long" id="title_add" name="title_en" class="long" value="" />						</dd>						<dd>							<label for="desc_add" class="long">Description</label>							<textarea id="desc_add" class="long" name="desc_en" rows="3"></textarea>						</dd>						<dd class="submitDD">							<img class="close" src="/img/buttons/button-close.gif" alt="Close" title="Close" border="0" />							<input type="image" class="save" src="/img/buttons/button-save.gif" name="Save" title="Save" />						</dd>					</dl>				</form>			</fieldset></div>			<div class="edit_sect mainForm popup-screen hidden"><fieldset>				<form id="properties" enctype="multipart/form-data" class="jform" action="process.php" method="post">					<dl>						<dd>							<input type="hidden" name="action" value="update">							<input type="hidden" name="cwd" value="/">							<input type="hidden" id="id"  name="id" value="">							<label for="file" class="long">File</label>							<input type="text" class="long" id="file" name="file" value="" disabled="disabled" />						</dd>						<dd>							<label for="title_ed" class="long">Title</label>							<input type="text" class="long" id="title_ed" name="title_en" class="long" value="" />						</dd>						<dd>							<label for="desc_ed" class="long">Description</label>							<textarea id="desc_ed" class="long" name="desc_en" rows="3"></textarea>						</dd>						<dd class="submitDD">							<img class="close" src="/img/buttons/button-close.gif" alt="Close" title="Close" border="0" />							<input type="image" class="save" src="/img/buttons/button-save.gif" name="Save" title="Save" />						</dd>					</dl>				</form>			</fieldset></div>                <div class="noedit_sect mainForm hidden"><fieldset>				<div><strong>File: </strong> <span id="name"></span> <img class="edit" src="images/edit.png" alt="edit"><br /></div>				<div><strong>Title: </strong> <span id="title_en"></span><br /></div>				<div><strong>Description: </strong> <span id="desc_en"></span></div>            </fieldset></div>			<div id="ct">				<div id="listing-ct">					<table id="listing" width="670" cellpadding="0" cellspacing="0" class="resultsTable">						<thead>							<tr>								<td style="padding: 7px;">Name</td>								<td style="padding: 7px;">Size</td>								<td width="50" align="right">&nbsp;</td>							</tr>						</thead>						<tbody id="files">						</tbody>					</table>				</div>			</div>        </div><script>	var wd = parent.document;	var ifr;		$(document).ready( function() {		$('iframe', wd).each( function() { ifr = $(this); });	});	// Get files for assets	function getFiles(file){		// Remove old files		$("#files").html("");				// Encode file name		if(file){			file = Base64.encode(file);		} else {			var file = "";		}		$.getJSON('/administration/assets/browse/' + file + '/', function(data) {						if(!data.files) return;					$.each(data.files, function(key, val) {							var trclass = (key % 2 == 0) ? "even" : "zebra";				// If browsing dir				if(val.type == "dir"){					var tr = '<tr class="dir '+trclass+'">';							tr += '<td class="name">';							tr += '   <a class="dragbl dir" href="javascript:;" onClick="getFiles(\'' + val.path +'\');" style="-moz-user-select: none;">'+val.name+'</a>';							tr += '</td>';							tr += '<td>';							tr += '   <span class="tdpadding">-</span>';							tr += '</td>';							tr += '<td class="icons">';														if(val.name == ".."){								tr += "-";							} else {								tr += '	  <a class="rmdir" href="javascript:;" onClick="removeFile(\''+Base64.encode(val.path)+'\');" title="Delete">Delete</a>';							}														tr += '</td>';						tr += '</tr>';					$("#files").append(tr);									// If browsing files				} else {										var tr = '<tr class="'+val.class+' '+trclass+'">';							tr += '<td class="name">';							tr += '   <a class="dragbl" href="javascript:;" onClick="includeFile(\''+(val.webpath)+'\');" style="-moz-user-select: none;">'+val.name+'</a>';							tr += '</td>';							tr += '<td>';							tr += '   <span class="tdpadding">'+val.size+' kb</span>';							tr += '</td>';							tr += '<td class="icons">';							(val.class == 'image' ? tr += '	  <a class="lightbox" href="'+(val.webpath)+'" title="Preview">Preview</a>' : '');							tr += '	  <a class="rmdir" href="javascript:;" onClick="removeFile(\''+Base64.encode(val.path)+'\');" title="Delete">Delete</a>';							tr += '</td>';						tr += '</tr>';					$("#files").append(tr);										$('.lightbox').lightBox();				}			});						$("#current_path").html(data.current);		});	}		getFiles();		// Include file	function includeFile(path){		if(ifr.contents().find("#"+input_id).size() > 0)			ifr.contents().find("#"+input_id).val(path);		else			if($("#"+input_id, wd).size() > 0)				$("#"+input_id, wd).val(path);		$(".windowClose", wd).unbind("click");		$(".assets", wd).fadeOut("normal");	}		// Remove file	function removeFile(path){		$.post('/administration/assets/delete/'+path, function(data) {			getFiles(data);		});	}		// Create folder popup	function showCreateFolder(){		$("#createFolderPopup").fadeIn();	}		// Add file popup	function showAddFile(){		$("#addFilePopup").fadeIn();	}		// Multiple files add popup	function showMultipleFiles(){		$("#showMultipleFiles").fadeIn(); 		$("#file_upload").remove(); 		$("#multiple_upload_holder").append('<input id="file_upload" name="file_upload" type="file" />');				var uploadifyConfig = {			'uploader': '/swf/uploadify.swf',			'cancelImg': '/img/uploadify-cancel.png',			'script': '/administration/assets/add_file/',			'fileDataName': 'file',			'multi': true,			'auto': true,			'scriptData': { path: $("#current_path").html()},			'onAllComplete': function(data){ 				getFiles( $("#current_path").html() );				$("#showMultipleFiles").fadeOut(); 							}		}		$("#file_upload").uploadify(uploadifyConfig);	}		function unUploadify(element){		if(!element){var element="*";};		$(element).next(element+"Uploader").remove();		$(element).css("display","inline");	};		// Submit new folder form	$('#newFolderForm').submit(function() {		$("#createFolderCurrentPath").val($("#current_path").html());				return jform.submit(this, {			onComplete: function(data) {				getFiles(data);				$("#name").val("");				$('#createFolderPopup').fadeOut();			}		});			});		// Submit add file popup	$('#addFileForm').submit(function() {		$("#addFileCurrentPath").val($("#current_path").html());				return jform.submit(this, {			onComplete: function(data) {				getFiles(data);				$("#file").val("");				$('#addFilePopup').fadeOut();			}		});			});</script></body></html>